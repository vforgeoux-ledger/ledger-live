version: '2.4'

services:
  speculos:
    image: ghcr.io/ledgerhq/speculos:latest
    platform: linux/amd64
    volumes:
      - ./lib/tmp:/speculos/apps
    env_file:
      - .env
    ports:
      - "${API_PORT}:${API_PORT}"
    build:
      context: /speculos
    command: --model nanos ./apps/app.elf --seed="${SEED}" --display headless --api-port ${API_PORT}
